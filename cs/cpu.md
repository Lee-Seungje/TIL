CPU 동작원리

CPU를 이해하기 위해서는 트랜지스터의 개념부터 알고있어야한다.

트랜지스터는 반도체이다. 반도체는 주로 실리콘을 사용하여 만드는데 순수한 실리콘은 전류가 통하기 어려워 실리콘보다 전자가 하나 많거나 적은 원소를 첨가하여 전류가 통하게 한다. 전자가 하나 적은 경우는 비어있는 곳으로 다른 전자가 이동하며 전류가 형성된다. 전자가 하나 많은 경우는 남는 전자가 자유롭게 이동하며 전류가 형성된다. 각각 P형 반도체와 N형 반도체라 불린다.

P형 반도체와 N형 반도체를 붙이면 전자가 자유로이 이동할 수 없는 공핍 영역이 생기고 서로 다른 전하를 가진 면이 생기고 따라서 전기장이 생성된다.
여기서 순방향으로 전압을 걸어주면 전류가 흐르게된다. 역방향으로 전압을 걸면 전류가 흐르지 않는다.
P형 반도체 2개 사이에 얇은 N형 반도체를 붙이고 순방향과 역방향의 전압을 걸어준다. N형 반도체를 뛰어 넘을 수 있을 만큼의 특정 전압을 걸어주면 전류가 흐르게 할 수 도 흐르지 않게 할 수 도 있는게 이런 방식의 스위치가 트랜지스터이다.

트랜지스터를 이용하면 논리회로를 만들 수 있다. 트랜지스터 두 개를 연결하여 or 게이트, and게이트가 만들어진다. or게이트는 둘 중 하나 이상에 전압이 걸린 경우이고, and게이트는 모두에 전압이 걸린 경우이다.
트랜지스터의 출력선을 건드리면 not 게이트를 만들 수 있고, 이는 입력과 출력값이 서로 바뀌게된다.
And, or, not 게이트를 적절히 연결하여 or 게이트와 출력값이 같지만, 입력이 모두 참인 경우에는 거짓이 출력되는 xor게이트를 만들 수 있다.
컴퓨터는 2진수를 사용하고, 트랜지스터를 이용해서 여러 논리회로를 구축할 수 있다.

CPU에는 산술논리장치가 존재한다. CPU에는 많은 트랜지스터가 모여서 논리게이트를 이루고 연산을 수행한다.
컴퓨터에는 하드디스크, 램, cpu가 있다. 하드디스크에는 프로그램이 설치된다. cpu의 속도에 비해 하드디스크는 느려서 cpu는 하드디스크가 아닌 램과 소통한다. 하지만 램도 cpu에 비하면 느리기 때문에 cpu 근처에 캐시메모리를 만들어 그곳에 데이터를 저장한다. 캐시메모리는 용량이 작기 때문에 중요한 데이터만 저장하여 사용한다.
cpu는 캐시메모리에 먼저 데이터를 요청하고 데이터가 존재하지 않는다면 램에 데이터를 요청한다.

컴퓨터에는 레지스터라는 기억장치도 존재한다. 레지스터는 cpu 내부에서 데이터를 일시적으로 저장하는 장치이다.
레지스터에 종류는 무척 많다. 프로그램 카운터는 다음에 수행 할 메모리의 주소가 들어있다. 메모리 주소 레지스터는 프로그램 카운터에서 수행할 주소를 받아 그 주소를 조회해 데이터를 가져온다. 메모리 버퍼 레지스터는 메모리 주소 레지스터가 찾아온 데이터나 명령을 일시적으로 저장한다. 명령어 레지스터에는 명령에 관한 데이터가 저장된다.
누산기에서 연산의 값을 일시적으로 저장하고 결과값은 메모리 버퍼 레지스터를 통해 메모리로 전송된다. 제어장치는 명령어 레지스터의 명령을 받아 해석하고 명령을 실행할 곳에 지시한다. ALU는 산술 논리 연산을한다.

우리가 사용하는 프로그래밍 언어는 컴파일러를 거쳐 cpu가 실행할 수 있는 어셈블리 언어로 바뀐다. 이 어셈블리 언어는 어셈블러에 의해 기계어로 번역된다.

cpu는 데이터를 인출하고 해석하고 실행하고 저장하는 과정을 수행한다. cpu는 이 과정조차도 분리해서 수행하고 각각의 프로세스를 스레드라한다. 코어 하나에 여러 개의 스레드가 실행되면 속도가 빨라진다.
